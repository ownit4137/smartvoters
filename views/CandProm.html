<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Main Page</title>
    <link rel="stylesheet" href="./src/style.css" />
    <script>
      function sidebar_open() {
        document.getElementById("sidebar-layout").style.display = "block";
      }

      function sidebar_close() {
        document.getElementById("sidebar-layout").style.display = "none";
      }

      function alert_empty() {
        var f = document.searchinput.name.value;

        if (f == "") {
          alert("í›„ë³´ì ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”");
          document.searchinput.name.focus();
          return;
        }

        document.searchinput.submit();
      }
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="./src/readmore.min.js"></script>
  </head>

  <body>
    <div id="layout">
      <!-- Sidebar -->
      <div id="sidebar-layout" style="display: none" id="sidebar" class="sidebar-animate-left">
        <button onclick="sidebar_close()" class="button">ë‹«ê¸°</button>
        <a href="./" class="button" style="float: right;">Home</a>
        <div>
          <div class="sidebar title">í›„ë³´ì ê³µì•½ ë³´ê¸°</div>
          <div>
            <div>
              <table class="linktable">
                <tr>
                  <td class="cell">1</td>
                  <td class="second cell"><a href="./PollPlace">ë‚´ íˆ¬í‘œì†Œ ì°¾ê¸°</a><br /></td>
                  <td class="cell"></td>
                </tr>
              </table><br>
              <table class="linktable">
                <tr>
                  <td class="cell">2</td>
                  <td class="second cell"><a href="./CandInfo">í›„ë³´ì ì •ë³´ ë³´ê¸°</a><br /></td>
                  <td class="cell"></td>
              </table><br>
              <table class="linktable">
                <tr>
                  <td class="cell">3</td>
                  <td class="second cell"><a href="./CandProm">í›„ë³´ì ê³µì•½ ë³´ê¸°</a><br /></td>
                  <td class="cell"><img src="./src/stamp.png" alt="" style="width:28px;object-fit:cover"></td>
                </tr>
              </table><br>
              <table class="linktable">
                <tr>
                  <td class="cell">4</td>
                  <td class="second cell"><a href="./Member">êµ­íšŒì˜ì› ì°¾ê¸°</a><br /></td>
                  <td class="cell"></td>
                </tr>
              </table><br>
              <table class="linktable">
                <tr>
                  <td class="cell">5</td>
                  <td class="second cell"><a href="./PrevElec">ì´ì „ ì„ ê±° ë³´ê¸°</a><br /></td>
                  <td class="cell"></td>
                </tr>
              </table><br>
            </div>
          </div>
        </div>
      </div>
      <!-- Page Content -->
      <div>
        <div id="body-content">
          <div id="upper">
            <div id="sidebar-button">
              <button class="button"
                style="font-size: 15pt"
                onclick="sidebar_open()">
                â˜°
              </button>
            </div>
            <div class="title">í›„ë³´ì ê³µì•½ ë³´ê¸°</div>
          </div>
          <hr />
          <div id="content">
            <div id="search-layout">
              <form name="searchinput" action="CandProm_do" method="GET" accept-charset="utf-8">
                
                <input type="text" name="name" class="inputarea" placeholder="í›„ë³´ì ì´ë¦„">
                <input type="text" name="partyName" class="inputarea" placeholder="ì •ë‹¹ëª…">
                <input type="submit" value="     " class="inputarea search-button" onclick="alert_empty();">
              </form>
            </div>
            
            <% if(typeof(promiseList) !== "undefined") {%> 
            <div id="search-result">
              <% if (promiseList.length > 0) {%> 
              <table id="search-table">
                <% 
                  var distname = "";
                  for(var i=0; i < promiseList.length; i++) {
                %> 
              
                <%
                  var data = promiseList[i];
                  var name = data.name;
                  var giho = data.giho;
                  var partyName = data.partyName;
                  var prmTitle = data.prmTitle;
                  var prmCont = data.prmCont.replace(/ /gi, "&nbsp").replace(/\n/gi, "<br>").replace(/â–¡/g, 'ğŸ“°').replace(/â—‹/g, 'â—¾');

                  if (name !== distname) {
                    distname = name;
                %>
                <tr>
                  <th id="prommem" colspan="2">ê¸°í˜¸&nbsp;<%=giho%>ë²ˆ&nbsp;<%=partyName%>&nbsp;<%=name%>&nbsp;í›„ë³´ì˜&nbsp;ê³µì•½</th>
                </tr>
                <% }%>
                <tr>
                  <th><%= prmTitle %> </th>
                  <td class="prmcont" style="text-align: left;"><%-prmCont%></td>
                </tr>
                <% } %> 
              </table>
              <script>
                $(function () { 
                  $('.prmcont').readmore({ 
                    blockCSS: 'display: block; width: 50em; padding:1em 0em 1em 0em', 
                    collapsedHeight: 150, 
                    moreLink: '<a href="#" class="more">ë”ë³´ê¸°</a>', 
                    lessLink: '<a href="#" class="more">ë‹«ê¸°</a>' 
                  }); 
                });
              </script>
              <% }else { %>
                <div>ê²€ìƒ‰ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
              <% } %>  
            </div>
            <% } %> 
            
          </div>
        </div>
        
      </div>
    </div>
  </body>
</html>
